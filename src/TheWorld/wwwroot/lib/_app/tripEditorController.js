!function(){"use strict";function t(t,e){var s=this;s.tripName=t.tripName,s.stops=[],s.errorMessage="",s.isBusy=!0,s.newStop={};var n="/api/trips/"+s.tripName+"/stops";e.get(n).then(function(t){angular.copy(t.data,s.stops),o(s.stops)},function(t){s.errorMessage="Failed to load stops"})["finally"](function(){s.isBusy=!1}),s.addStop=function(){s.isBusy=!0,e.post(n,s.newStop).then(function(t){s.stops.push(t.data),o(s.stops),s.newStop={}},function(t){s.errorMessage="Failed to add new stop"})["finally"](function(){s.isBusy=!1})}}function o(t){for(var o=[],e={},s=0,n=t.length;n>s;s++){if(e={lat:t[s].latitude,lng:t[s].longitude},0==s)var a=new google.maps.Map(document.getElementById("map"),{zoom:3,center:e,title:t[s].name});new google.maps.Marker({position:e,map:a,title:t[s].name});o.push(e)}var i=new google.maps.Polyline({path:o,geodesic:!0,strokeColor:"#FF0000",strokeOpacity:1,strokeWeight:2});i.setMap(a)}angular.module("app-trips").controller("tripEditorController",t)}();